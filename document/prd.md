产品需求文档 (PRD): 一体化在线教育平台

文档版本: 1.0
发布日期: 2025年9月10日
1. 简介 (Introduction)

1.1. 项目愿景 (Vision)

构建一个功能强大、用户体验卓越的一体化在线教育 Web 平台。该平台将无缝集成课程管理、高清视频直播、便捷的作业提交与批改以及安全的在线考试系统，为教育者和学习者提供一个高效、互动和全面的在线学习解决方案。
1.2. 项目目标 (Goals)

- 业务目标:
  - 为教育机构或个人教师提供一个独立的、功能完备的在线教学平台。
  - 通过提供流畅的直播、点播和互动体验，提升学生参与度和学习效果。
  - 实现教学流程（发布课程、直播授课、布置作业、组织考试、批改评分）的闭环管理。
- 技术目标:
  - 构建一个技术栈现代化的前后端分离 Web 应用。
  - 确保平台的高性能、高可用性和良好的可扩展性。
  - 实现安全可靠的用户认证和授权机制。
  - 通过容器化实现标准化、可快速伸缩的部署流程。

1.3. 目标用户 (User Personas)

- 管理员 (Admin): 负责平台的用户管理、课程分类、系统设置、权限控制等。
- 教师 (Instructor): 负责创建课程、发起直播、布置作业、创建考试、批改作业和与学生互动。
- 学生 (Student): 负责报名课程、观看视频、提交作业、参加考试和查看学习进度。

---

2. 功能需求 (Functional Requirements)

2.1. 核心模块: 课程管理

- 2.1.1. 课程创建与发布 (教师):
  - 教师可以创建课程，定义课程标题、简介、封面等。
  - 课程内容以“章-节”形式组织，每节可包含视频、直播、作业、考试等内容。
  - 课程视频、资料附件等非结构化文件上传至阿里云 OSS。
- 2.1.2. 课程学习 (学生):
  - 学生可以浏览、搜索和报名课程。
  - 在线观看课程视频（从 OSS 读取的视频切片）。播放器支持倍速、清晰度切换等功能。
  - 系统记录学生的学习进度。

2.2. 核心模块: 视频直播

- 2.2.1. 发起与观看直播:
  - 教师在后台发起直播，获取推流地址。
  - 学生在课程页面观看实时直播。
- 2.2.2. 直播实时互动:
  - 直播间内嵌实时聊天室，师生可通过文字互动。
  - 技术实现:
    - 前端 (React): 使用 WebSocket 客户端（如 stomp.js）连接后端 WebSocket 端点，订阅和发送消息。
    - 后端 (Spring Boot): 使用 Spring WebSocket 和 STOMP (Simple Text Oriented Messaging Protocol) 构建消息代理，处理实时消息的广播和点对点发送。

2.3. 核心模块: 作业提交与批改

- 2.3.1. 布置与提交作业:
  - 教师可布置作业，设定截止日期，并上传作业附件 (存至 OSS)。
  - 学生可在线提交文字或附件形式的作业。
- 2.3.2. 作业批改:
  - 教师可在线批改学生提交的作业，给出分数和评语。
  - 学生可查看自己的作业成绩和教师评语。

2.4. 核心模块: 在线考试

- 2.4.1. 试卷创建与管理:
  - 教师可以创建题库，包含单选、多选、判断、简答等题型。
  - 教师可从题库中抽题或手动录入，组成试卷，并设置分数。
- 2.4.2. 组织与参加考试:
  - 教师发布考试，设定考试时间、时长。
  - 学生在规定时间内进入考试，系统提供倒计时。
- 2.4.3. 自动与手动阅卷:
  - 客观题（单选、多选、判断）由系统自动判分。
  - 主观题由教师后台手动批阅。
  - 完成后，系统计算总分并发布成绩。

2.5. 通用模块: 用户认证与授权

- 2.5.1. 登录与鉴权:
  - 用户通过账号密码登录。
  - 技术实现:
    - 后端使用 Spring Security 框架进行认证。
    - 认证成功后，使用 jjwt 库生成一个包含用户ID和角色的 JWT (JSON Web Token) 并返回给前端。
- 2.5.2. 授权与访问控制:
  - 前端 (React): 在每次请求 API 时，通过请求头（Authorization Header）携带 JWT。
  - 后端 (Spring Boot): Spring Security 配置一个过滤器，拦截所有受保护的请求，验证 JWT 的有效性。若验证通过，则根据用户角色判断其是否有权访问相应 API。

---

3. 技术栈与架构 (Technical Stack & Architecture)

3.1. 前端 (Frontend)

- 核心框架: React
- 构建工具: Vite (提供极速的开发体验)
- 路由管理: React Router
- 状态管理: Redux Toolkit
- UI 组件库: Ant Design
- 实时通信: WebSocket (通过 stomp.js 等库与后端 STOMP 协议集成)

3.2. 后端 (Backend)

- 核心框架: Spring Boot 3+
- 安全框架: Spring Security (集成 JWT 鉴权)
- JWT 工具: jjwt
- ORM 框架: Spring Data JPA (简化数据库操作)
- 对象存储: aliyun-sdk-oss (集成阿里云 OSS)
- 实时通信: Spring WebSocket + STOMP
- API 文档: SpringDoc OpenAPI (自动生成 Swagger API 文档)

3.3. 数据库 (Database)

- 关系型数据库: PostgreSQL (PGSQL)
  - 用途: 存储课程表、用户数据、作业、考试等结构化数据。
  - 版本控制: 使用 Flyway 管理数据库 schema 的迁移和版本。
- 对象存储: 阿里云 OSS
  - 用途: 存储视频切片、课程封面、用户头像、作业附件等大文件。

3.4. 部署与运维 (DevOps)

- Web 服务器/反向代理: Nginx
  - 部署前端静态资源，并将 API 请求反向代理到后端 Spring Boot 服务。
- 容器化: Docker & Docker Compose
  - 前端: 构建一个基于 Nginx 的 Docker 镜像来运行 React 应用。
  - 后端: 将 Spring Boot 应用打包成一个独立的 Docker 镜像。
  - 编排: 使用 docker-compose.yml 文件来定义和管理前端、后端、PostgreSQL、Nginx 等所有服务的容器，实现一键化部署和环境隔离。

---

4. 非功能性需求 (Non-Functional Requirements)

- 4.1. 性能 (Performance):
  - API 响应时间（95%）应在 200ms 以内。
  - 视频直播延迟应控制在 3-5 秒内，保证互动体验。
  - 前端页面应做性能优化，确保首次加载速度。
- 4.2. 安全性 (Security):
  - 所有 API 接口必须经过 JWT 认证和授权。
  - 密码必须经过哈希加密（如 BCrypt）后存储。
  - 防止常见的 Web 攻击，如 SQL 注入、XSS、CSRF。
- 4.3. 可扩展性 (Scalability):
  - 后端服务应设计为无状态，便于通过增加 Docker 容器实例进行水平扩展。
  - 数据库和 OSS 使用云服务，具备良好的弹性伸缩能力。
- 4.4. 可维护性 (Maintainability):
  - 代码应遵循统一的编码规范，有清晰的注释。
  - 通过 SpringDoc OpenAPI 自动生成 API 文档，方便前后端协作。
  - 使用 Flyway 管理数据库变更，使数据库结构清晰可追溯。