# æœåŠ¡å¯åŠ¨çŠ¶æ€æŠ¥å‘Š

## åç«¯æœåŠ¡ âœ… å·²å¯åŠ¨

### å®¹å™¨ä¿¡æ¯
- **å®¹å™¨åç§°**: psychic-backend
- **çŠ¶æ€**: è¿è¡Œä¸­
- **ç«¯å£**: 8080
- **URL**: http://localhost:8080

### æœåŠ¡æ—¥å¿—
```
âœ… æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸ
â„¹ï¸  æµ‹è¯•æ•°æ®å¡«å……å·²ç¦ç”¨ (ENABLE_SEED=false)

ğŸš€ æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼
ğŸ“ ç›‘å¬åœ°å€: http://localhost:8080
ğŸ“š APIæ–‡æ¡£: http://localhost:8080/api/v1
```

### æ£€æŸ¥åç«¯çŠ¶æ€
```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps | grep psychic-backend

# æŸ¥çœ‹æ—¥å¿—
docker logs psychic-backend

# æµ‹è¯• API
curl http://localhost:8080/health
```

---

## å‰ç«¯æœåŠ¡ â³ éœ€è¦æ‰‹åŠ¨å¯åŠ¨

### å¯åŠ¨æ–¹å¼

#### æ–¹å¼ 1: å¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰
```bash
cd /e/biyesheji/psychic-broccoli/frontend
npm run dev
```

è®¿é—®: http://localhost:5173

#### æ–¹å¼ 2: ç”Ÿäº§æ„å»º
```bash
cd /e/biyesheji/psychic-broccoli/frontend
npm run build
npm run preview
```

---

## æµ‹è¯•è®¨è®ºåŠŸèƒ½ä¿®å¤

### 1. æµ‹è¯•è®¨è®ºåˆ—è¡¨ API

```bash
# éœ€è¦å…ˆç™»å½•è·å– token
curl -X POST http://localhost:8080/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"student1","password":"password123"}'

# ä½¿ç”¨è¿”å›çš„ token æµ‹è¯•è®¨è®ºåˆ—è¡¨
curl http://localhost:8080/api/v1/discussions?courseId=1 \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**é¢„æœŸå“åº”**ï¼ˆæ³¨æ„ `replyCount` å­—æ®µï¼‰:
```json
[
  {
    "id": 1,
    "title": "è®¨è®ºæ ‡é¢˜",
    "status": "OPEN",
    "replyCount": 5,
    "createdAt": "2026-02-08T10:00:00Z",
    "course": {...},
    "author": {...}
  }
]
```

### 2. æµ‹è¯•è®¨è®ºè¯¦æƒ… API

```bash
curl http://localhost:8080/api/v1/discussions/1 \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**é¢„æœŸå“åº”**ï¼ˆåŒæ—¶åŒ…å« `replyCount` å’Œ `replies`ï¼‰:
```json
{
  "id": 1,
  "title": "è®¨è®ºæ ‡é¢˜",
  "status": "OPEN",
  "replyCount": 5,
  "replies": [
    {
      "id": 1,
      "content": "å›å¤å†…å®¹",
      "createdAt": "2026-02-08T10:00:00Z",
      "user": {
        "id": 2,
        "username": "user2"
      }
    }
  ]
}
```

### 3. å‰ç«¯é¡µé¢æµ‹è¯•

1. å¯åŠ¨å‰ç«¯æœåŠ¡å™¨
2. è®¿é—®è®¨è®ºåˆ—è¡¨é¡µé¢
3. éªŒè¯ï¼š
   - âœ… å›å¤æ•°é‡æ˜¾ç¤ºæ­£ç¡®ï¼ˆä½¿ç”¨ `replyCount`ï¼‰
   - âœ… ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ
   - âœ… å›å¤åˆ—è¡¨æ˜¾ç¤ºæ­£ç¡®ï¼ˆä½¿ç”¨ `replies` æ•°ç»„ï¼‰
   - âœ… TypeScript ç¼–è¯‘æ— é”™è¯¯

---

## å¿«é€Ÿå‘½ä»¤

### å¯åŠ¨æ‰€æœ‰æœåŠ¡

```bash
# å¯åŠ¨åç«¯ï¼ˆå·²å¯åŠ¨ï¼‰
cd /e/biyesheji/psychic-broccoli/backend
powershell -ExecutionPolicy Bypass -File start-backend.ps1

# å¯åŠ¨å‰ç«¯
cd /e/biyesheji/psychic-broccoli/frontend
npm run dev
```

### åœæ­¢æœåŠ¡

```bash
# åœæ­¢åç«¯
docker stop psychic-backend
docker rm psychic-backend

# åœæ­¢å‰ç«¯
# åœ¨å‰ç«¯ç»ˆç«¯æŒ‰ Ctrl+C
```

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€

```bash
# åç«¯
docker ps | grep psychic
docker logs psychic-backend

# å‰ç«¯
netstat -ano | findstr ":5173"
```

---

## ä¿®å¤éªŒè¯æ¸…å•

- [x] åç«¯ä»£ç å·²ä¿®å¤ï¼ˆreplyCount å­—æ®µï¼‰
- [x] å‰ç«¯ç±»å‹å·²ä¿®å¤ï¼ˆreplyCount ç±»å‹ï¼‰
- [x] Docker ç¼–è¯‘æˆåŠŸ
- [x] åç«¯æœåŠ¡å·²å¯åŠ¨
- [ ] å‰ç«¯æœåŠ¡å¾…å¯åŠ¨ï¼ˆéœ€è¦æ‰‹åŠ¨ï¼‰
- [ ] API æµ‹è¯•å¾…éªŒè¯
- [ ] å‰ç«¯é¡µé¢æµ‹è¯•å¾…éªŒè¯

---

## ä¸‹ä¸€æ­¥

1. **å¯åŠ¨å‰ç«¯æœåŠ¡**:
   ```bash
   cd /e/biyesheji/psychic-broccoli/frontend
   npm run dev
   ```

2. **ç™»å½•ç³»ç»Ÿ**:
   è®¿é—® http://localhost:5173

3. **æµ‹è¯•è®¨è®ºåŠŸèƒ½**:
   - è¿›å…¥ä»»æ„è¯¾ç¨‹
   - æŸ¥çœ‹è®¨è®ºåˆ—è¡¨ï¼ˆéªŒè¯å›å¤æ•°é‡ï¼‰
   - ç‚¹å‡»è®¨è®ºè¯¦æƒ…ï¼ˆéªŒè¯å›å¤åˆ—è¡¨ï¼‰
   - å‘è¡¨å›å¤ï¼ˆéªŒè¯åŠŸèƒ½æ­£å¸¸ï¼‰

---

æœ€åæ›´æ–°ï¼š2026-02-08 19:55
