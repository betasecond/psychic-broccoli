# 实现退出登录功能

## 1. 功能分析
- 现有系统中，用户头像下拉菜单只有"个人资料"选项，缺少退出登录功能
- 已经存在完整的退出登录逻辑在`authSlice.ts`中，包括`logout` reducer和`logoutAsync` thunk
- 需要在用户头像下拉菜单中添加"退出登录"选项

## 2. 实现步骤

### 步骤1：修改UserAvatar组件
- 在`UserAvatar.tsx`文件中导入`logoutAsync` thunk
- 在菜单items数组中添加一个新的退出登录选项
- 为退出登录选项添加点击事件处理函数，调用`logoutAsync` thunk

### 步骤2：添加退出登录逻辑
- 使用`useAppDispatch` hook获取dispatch函数
- 创建`handleLogout`函数，调用`dispatch(logoutAsync())`
- 确保退出登录后清除用户会话并将用户重定向到登录页面

### 步骤3：测试功能
- 验证退出登录菜单项是否正确显示
- 验证点击退出登录后用户是否被正确注销
- 验证退出登录后用户是否被重定向到登录页面

## 3. 代码修改点

### 文件：`frontend/src/components/UserAvatar.tsx`
- 添加导入：`import { useAppDispatch } from '../store'`
- 添加导入：`import { logoutAsync } from '../store/slices/authSlice'`
- 添加`handleLogout`函数
- 在`items`数组中添加退出登录菜单项

## 4. 预期效果
- 用户头像下拉菜单中会显示"退出登录"选项
- 点击退出登录后，用户将被注销并清除所有会话数据
- 用户将被重定向到登录页面

## 5. 技术要点
- 使用Redux Toolkit的异步thunk处理退出登录逻辑
- 利用sessionManager清除本地存储的用户信息
- 使用React Router进行页面重定向

## 6. 代码质量考虑
- 保持现有代码风格和结构
- 确保错误处理机制完善
- 遵循React和Redux最佳实践